import{$ as ie,A as st,B as it,C as nt,D as $,E as ee,F as at,G as h,H as ot,I as dt,J as lt,K as ut,L as ct,M as ht,N as ft,O as gt,P as pt,Q as U,R as mt,S as te,T as re,U as _t,V as yt,W as wt,X as vt,Y as It,Z as Et,_ as se,a as $e,aa as St,b as Ue,ba as bt,c as Me,ca as ne,d as y,da as At,e as Oe,ea as Ct,f as ke,fa as Ft,g as We,ga as xt,h as Ge,ha as Dt,i as Le,ia as Tt,j as Qe,ja as Nt,k as Ve,ka as qt,l as Je,la as Pt,m as F,n as H,o as Ze,p as j,q as X,r as Ke,s as ze,u as Ye,v as He,w as Xe,x as et,y as tt,z as rt}from"./chunk-TKUNDG7E.js";import{d as Se,e as be,f as l,j as Ae,k as Ce,l as Fe,n as xe,o as De,p as Te,q as Ne,r as qe,s as Pe,t as Be,u as Re,v as je}from"./chunk-LWAGGOL6.js";import{A as K,Ga as we,I as _e,N as P,O as B,S as R,Sc as Ie,_ as ye,ba as C,c as pe,da as a,h as me,m as A,mb as ve,n as Z,r as u}from"./chunk-5G5AIX3G.js";import{k as z,l as Ee,u as Y}from"./chunk-U4PAU4FA.js";import{a as q,b as J}from"./chunk-CQCHLVVT.js";var zt="@firebase/firestore-compat",Yt="0.3.30";function ce(r,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new y("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function Bt(){if(typeof Uint8Array>"u")throw new y("unimplemented","Uint8Arrays are not available in this environment.")}function Rt(){if(!Ge())throw new y("unimplemented","Blobs are unavailable in Firestore in this environment.")}var M=class r{constructor(e){this._delegate=e}static fromBase64String(e){return Rt(),new r($.fromBase64String(e))}static fromUint8Array(e){return Bt(),new r($.fromUint8Array(e))}toBase64(){return Rt(),this._delegate.toBase64()}toUint8Array(){return Bt(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function ae(r){return Ht(r,["next","error","complete"])}function Ht(r,e){if(typeof r!="object"||r===null)return!1;let t=r;for(let s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}var oe=class{enableIndexedDbPersistence(e,t){return He(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Xe(e._delegate)}clearIndexedDbPersistence(e){return et(e._delegate)}},O=class{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Le||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ue("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,s={}){Je(this._delegate,e,t,s)}enableNetwork(){return rt(this._delegate)}disableNetwork(){return st(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Qe("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return tt(this._delegate)}onSnapshotsInSync(e){return At(this._delegate,e)}get app(){if(!this._appCompat)throw new y("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new I(this,H(this._delegate,e))}catch(t){throw d(t,"collection()","Firestore.collection()")}}doc(e){try{return new c(this,j(this._delegate,e))}catch(t){throw d(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _(this,Ze(this._delegate,e))}catch(t){throw d(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return xt(this._delegate,t=>e(new k(this,t)))}batch(){return Ye(this._delegate),new W(new Ft(this._delegate,e=>Ct(this._delegate,e)))}loadBundle(e){return it(this._delegate,e)}namedQuery(e){return nt(this._delegate,e).then(t=>t?new _(this,t):null)}},w=class extends pt{constructor(e){super(),this.firestore=e}convertBytes(e){return new M(new $(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return c.forKey(t,this.firestore,null)}};function Xt(r){$e(r)}var k=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new w(e)}get(e){let t=g(e);return this._delegate.get(t).then(s=>new p(this._firestore,new U(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){let i=g(e);return s?(ce("Transaction.set",s),this._delegate.set(i,t,s)):this._delegate.set(i,t),this}update(e,t,s,...i){let n=g(e);return arguments.length===2?this._delegate.update(n,t):this._delegate.update(n,t,s,...i),this}delete(e){let t=g(e);return this._delegate.delete(t),this}},W=class{constructor(e){this._delegate=e}set(e,t,s){let i=g(e);return s?(ce("WriteBatch.set",s),this._delegate.set(i,t,s)):this._delegate.set(i,t),this}update(e,t,s,...i){let n=g(e);return arguments.length===2?this._delegate.update(n,t):this._delegate.update(n,t,s,...i),this}delete(e){let t=g(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},v=class r{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){let s=new mt(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new m(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let s=r.INSTANCES,i=s.get(e);i||(i=new WeakMap,s.set(e,i));let n=i.get(t);return n||(n=new r(e,new w(e),t),i.set(t,n)),n}};v.INSTANCES=new WeakMap;var c=class r{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new w(e)}static forPath(e,t,s){if(e.length%2!==0)throw new y("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new r(t,new F(t._delegate,s,new We(e)))}static forKey(e,t,s){return new r(t,new F(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new I(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new I(this.firestore,H(this._delegate,e))}catch(t){throw d(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=z(e),e instanceof F?X(this._delegate,e):!1}set(e,t){t=ce("DocumentReference.set",t);try{return t?se(this._delegate,e,t):se(this._delegate,e)}catch(s){throw d(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return arguments.length===1?ie(this._delegate,e):ie(this._delegate,e,t,...s)}catch(i){throw d(i,"updateDoc()","DocumentReference.update()")}}delete(){return St(this._delegate)}onSnapshot(...e){let t=jt(e),s=$t(e,i=>new p(this.firestore,new U(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ne(this._delegate,t,s)}get(e){let t;return e?.source==="cache"?t=yt(this._delegate):e?.source==="server"?t=wt(this._delegate):t=_t(this._delegate),t.then(s=>new p(this.firestore,new U(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new r(this.firestore,e?this._delegate.withConverter(v.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function d(r,e,t){return r.message=r.message.replace(e,t),r}function jt(r){for(let e of r)if(typeof e=="object"&&!ae(e))return e;return{}}function $t(r,e){var t,s;let i;return ae(r[0])?i=r[0]:ae(r[1])?i=r[1]:typeof r[0]=="function"?i={next:r[0],error:r[1],complete:r[2]}:i={next:r[1],error:r[2],complete:r[3]},{next:n=>{i.next&&i.next(e(n))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(s=i.complete)===null||s===void 0?void 0:s.bind(i)}}var p=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new c(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return re(this._delegate,e._delegate)}},m=class extends p{data(e){let t=this._delegate.data(e);return this._delegate._converter||Me(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},_=class r{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new w(e)}where(e,t,s){try{return new r(this.firestore,h(this._delegate,ot(e,t,s)))}catch(i){throw d(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new r(this.firestore,h(this._delegate,dt(e,t)))}catch(s){throw d(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new r(this.firestore,h(this._delegate,lt(e)))}catch(t){throw d(t,"limit()","Query.limit()")}}limitToLast(e){try{return new r(this.firestore,h(this._delegate,ut(e)))}catch(t){throw d(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new r(this.firestore,h(this._delegate,ct(...e)))}catch(t){throw d(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new r(this.firestore,h(this._delegate,ht(...e)))}catch(t){throw d(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new r(this.firestore,h(this._delegate,ft(...e)))}catch(t){throw d(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new r(this.firestore,h(this._delegate,gt(...e)))}catch(t){throw d(t,"endAt()","Query.endAt()")}}isEqual(e){return Ke(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=It(this._delegate):e?.source==="server"?t=Et(this._delegate):t=vt(this._delegate),t.then(s=>new x(this.firestore,new te(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){let t=jt(e),s=$t(e,i=>new x(this.firestore,new te(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ne(this._delegate,t,s)}withConverter(e){return new r(this.firestore,e?this._delegate.withConverter(v.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},de=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new m(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},x=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new m(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new de(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new m(this._firestore,s))})}isEqual(e){return re(this._delegate,e._delegate)}},I=class r extends _{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new c(this.firestore,e):null}doc(e){try{return e===void 0?new c(this.firestore,j(this._delegate)):new c(this.firestore,j(this._delegate,e))}catch(t){throw d(t,"doc()","CollectionReference.doc()")}}add(e){return bt(this._delegate,e).then(t=>new c(this.firestore,t))}isEqual(e){return X(this._delegate,e._delegate)}withConverter(e){return new r(this.firestore,e?this._delegate.withConverter(v.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function g(r){return Ve(r,F)}var le=class r{constructor(...e){this._delegate=new ee(...e)}static documentId(){return new r(ke.keyField().canonicalString())}isEqual(e){return e=z(e),e instanceof ee?this._delegate._internalPath.isEqual(e._internalPath):!1}};var ue=class r{constructor(e){this._delegate=e}static serverTimestamp(){let e=Tt();return e._methodName="FieldValue.serverTimestamp",new r(e)}static delete(){let e=Dt();return e._methodName="FieldValue.delete",new r(e)}static arrayUnion(...e){let t=Nt(...e);return t._methodName="FieldValue.arrayUnion",new r(t)}static arrayRemove(...e){let t=qt(...e);return t._methodName="FieldValue.arrayRemove",new r(t)}static increment(e){let t=Pt(e);return t._methodName="FieldValue.increment",new r(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var er={Firestore:O,GeoPoint:at,Timestamp:Oe,Blob:M,Transaction:k,WriteBatch:W,DocumentReference:c,DocumentSnapshot:p,Query:_,QueryDocumentSnapshot:m,QuerySnapshot:x,CollectionReference:I,FieldPath:le,FieldValue:ue,setLogLevel:Xt,CACHE_SIZE_UNLIMITED:ze};function tr(r,e){r.INTERNAL.registerComponent(new Ee("firestore-compat",t=>{let s=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(s,i)},"PUBLIC").setServiceProps(Object.assign({},er)))}function rr(r){tr(r,(e,t)=>new O(e,t,new oe)),r.registerVersion(zt,Yt)}rr(Y);function sr(r,e=me){return new pe(t=>{let s;return e!=null?e.schedule(()=>{s=r.onSnapshot({includeMetadataChanges:!0},t)}):s=r.onSnapshot({includeMetadataChanges:!0},t),()=>{s?.()}})}function Ut(r,e){return sr(r,e)}function ir(r,e){return Ut(r,e).pipe(R(void 0),P(),u(t=>{let[s,i]=t;return i.exists?s?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function ge(r,e){return Ut(r,e).pipe(u(t=>({payload:t,type:"query"})))}var G=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let s=this.ref.collection(e),{ref:i,query:n}=kt(s,t);return new Q(i,n,this.afs)}snapshotChanges(){return ir(this.ref,this.afs.schedulers.outsideAngular).pipe(l)}valueChanges(e={}){return this.snapshotChanges().pipe(u(({payload:t})=>e.idField?J(q({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return A(this.ref.get(e)).pipe(l)}};function L(r,e){return ge(r,e).pipe(R(void 0),P(),u(t=>{let[s,i]=t,n=i.payload.docChanges(),f=n.map(o=>({type:o.type,payload:o}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((o,D)=>{let E=n.find(S=>S.doc.ref.isEqual(o.ref)),T=s?.payload.docs.find(S=>S.ref.isEqual(o.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(o.metadata)||!E&&T&&JSON.stringify(T.metadata)===JSON.stringify(o.metadata)||f.push({type:"modified",payload:{oldIndex:D,newIndex:D,type:"modified",doc:o}})}),f}))}function Mt(r,e,t){return L(r,t).pipe(B((s,i)=>nr(s,i.map(n=>n.payload),e),[]),_e(),u(s=>s.map(i=>({type:i.type,payload:i}))))}function nr(r,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(r=ar(r,s))}),r}function he(r,e,t,...s){let i=r.slice();return i.splice(e,t,...s),i}function ar(r,e){switch(e.type){case"added":if(!(r[e.newIndex]&&r[e.newIndex].doc.ref.isEqual(e.doc.ref)))return he(r,e.newIndex,0,e);break;case"modified":if(r[e.oldIndex]==null||r[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return he(r,e.newIndex,1,e);break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return he(r,e.oldIndex,1);break}return r}function Ot(r){return(!r||r.length===0)&&(r=["added","removed","modified"]),r}var Q=class{ref;query;afs;constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=L(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(u(s=>s.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(R(void 0),P(),K(([s,i])=>i.length>0||!s),u(([,s])=>s),l)}auditTrail(e){return this.stateChanges(e).pipe(B((t,s)=>[...t,...s],[]))}snapshotChanges(e){let t=Ot(e);return Mt(this.query,t,this.afs.schedulers.outsideAngular).pipe(l)}valueChanges(e={}){return ge(this.query,this.afs.schedulers.outsideAngular).pipe(u(t=>t.payload.docs.map(s=>e.idField?J(q({},s.data()),{[e.idField]:s.id}):s.data())),l)}get(e){return A(this.query.get(e)).pipe(l)}add(e){return this.ref.add(e)}doc(e){return new G(this.ref.doc(e),this.afs)}},fe=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?L(this.query,this.afs.schedulers.outsideAngular).pipe(l):L(this.query,this.afs.schedulers.outsideAngular).pipe(u(t=>t.filter(s=>e.indexOf(s.type)>-1)),K(t=>t.length>0),l)}auditTrail(e){return this.stateChanges(e).pipe(B((t,s)=>[...t,...s],[]))}snapshotChanges(e){let t=Ot(e);return Mt(this.query,t,this.afs.schedulers.outsideAngular).pipe(l)}valueChanges(e={}){return ge(this.query,this.afs.schedulers.outsideAngular).pipe(u(s=>s.payload.docs.map(i=>e.idField?q({[e.idField]:i.id},i.data()):i.data())),l)}get(e){return A(this.query.get(e)).pipe(l)}},or=new C("angularfire2.enableFirestorePersistence"),dr=new C("angularfire2.firestore.persistenceSettings"),lr=new C("angularfire2.firestore.settings"),ur=new C("angularfire2.firestore.use-emulator");function kt(r,e=t=>t){return{query:e(r),ref:r}}var Mr=(()=>{class r{schedulers;firestore;persistenceEnabled$;constructor(t,s,i,n,f,o,D,E,T,S,Wt,Gt,Lt,Qt,Vt,Jt,cr){this.schedulers=D;let N=Fe(t,o,s),V=T;S&&Re(N,o,Wt,Lt,Qt,Vt,Gt,Jt),[this.firestore,this.persistenceEnabled$]=xe(`${N.name}.firestore`,"AngularFirestore",N.name,()=>{let b=o.runOutsideAngular(()=>N.firestore());if(n&&b.settings(n),V&&b.useEmulator(...V),i&&!Ie(f)){let Zt=()=>{try{return A(b.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Kt){return typeof console<"u"&&console.warn(Kt),Z(!1)}};return[b,o.runOutsideAngular(Zt)]}else return[b,Z(!1)]},[n,V,i])}collection(t,s){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:n,query:f}=kt(i,s),o=this.schedulers.ngZone.run(()=>n);return new Q(o,f,this)}collectionGroup(t,s){let i=s||(f=>f),n=this.firestore.collectionGroup(t);return new fe(i(n),this)}doc(t){let s;typeof t=="string"?s=this.firestore.doc(t):s=t;let i=this.schedulers.ngZone.run(()=>s);return new G(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||r)(a(Ae),a(Ce,8),a(or,8),a(lr,8),a(we),a(ve),a(be),a(dr,8),a(ur,8),a(je,8),a(De,8),a(Te,8),a(Ne,8),a(qe,8),a(Pe,8),a(Be,8),a(Se,8))};static \u0275prov=ye({token:r,factory:r.\u0275fac,providedIn:"any"})}return r})();export{Mr as a};
