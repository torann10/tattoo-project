import{$ as Y,A as ke,Ga as $,K as Ee,Q as Z,Sc as be,T as b,U as X,W as Te,_ as j,ac as ve,ba as g,bc as Ie,c as R,da as d,f as he,fa as we,h as ge,i as me,k as T,ka as J,l as I,m as G,mb as P,n as O,pc as Q,r as x,z as Ae}from"./chunk-5G5AIX3G.js";import{a as _e,c as ee,g as ye,i as Re,l as te,n as Pe,o as ne,s as L,t as S,u as m}from"./chunk-U4PAU4FA.js";import{f as E}from"./chunk-CQCHLVVT.js";var qe="firebase",Ge="10.11.1";S(qe,Ge,"app");var B=new ve("ANGULARFIRE2_VERSION");function Yt(e,n,t){if(n){if(n.length===1)return n[0];let i=n.filter(s=>s.app===t);if(i.length===1)return i[0]}return t.container.getProvider(e).getImmediate({optional:!0})}var Ze=(e,n)=>{let t=n?[n]:L(),r=[];return t.forEach(o=>{o.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},M=class{constructor(){return Ze(Xe)}},Xe="app-check";function C(){}var H=class{zone;delegate;constructor(n,t=me){this.zone=n,this.delegate=t}now(){return this.delegate.now()}schedule(n,t,r){let o=this.zone,i=function(s){o.runGuarded(()=>{n.apply(this,[s])})};return this.delegate.schedule(i,t,r)}},re=class{zone;task=null;constructor(n){this.zone=n}call(n,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",C,{},C,C)),t.pipe(Te({next:r,complete:r,error:r})).subscribe(n).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ce=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new H(Zone.current)),this.insideAngular=t.run(()=>new H(Zone.current,ge)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||e)(d(P))};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function z(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Ye(e){return z().ngZone.runOutsideAngular(()=>e())}function _(e){return z().ngZone.run(()=>e())}function oe(e){return Je(z())(e)}function Je(e){return function(t){return t=t.lift(new re(e.ngZone)),t.pipe(I(e.outsideAngular),T(e.insideAngular))}}var Qe=(e,n)=>function(){let r=arguments;return n&&setTimeout(()=>{n.state==="scheduled"&&n.invoke()},10),_(()=>e.apply(void 0,r))},Jt=(e,n)=>function(){let t,r=arguments;for(let i=0;i<arguments.length;i++)typeof r[i]=="function"&&(n&&(t||=_(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",C,{},C,C))),r[i]=Qe(r[i],t));let o=Ye(()=>e.apply(this,r));if(!n)if(o instanceof R){let i=z();return o.pipe(I(i.outsideAngular),T(i.insideAngular))}else return _(()=>o);return o instanceof R?o.pipe(oe):o instanceof Promise?_(()=>new Promise((i,s)=>o.then(c=>_(()=>i(c)),c=>_(()=>s(c))))):typeof o=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),o.apply(this,arguments)}:_(()=>o)};var tt="firebase",nt="10.11.1";m.registerVersion(tt,nt,"app-compat");var rt=["ngOnDestroy"],Oe=(e,n,t,r={})=>new Proxy(e,{get:(o,i)=>t.runOutsideAngular(()=>{if(e[i])return r?.spy?.get&&r.spy.get(i,e[i]),e[i];if(rt.indexOf(i)>-1)return()=>{};let s=n.toPromise().then(c=>{let a=c?.[i];return typeof a=="function"?a.bind(c):a?.then?a.then(l=>t.run(()=>l)):t.run(()=>a)});return new Proxy(()=>{},{get:(c,a)=>s[a],apply:(c,a,l)=>s.then(h=>{let y=h?.(...l);return r?.spy?.apply&&r.spy.apply(i,l,y),y})})})});var U=class{constructor(n){return n}},V=new g("angularfire2.app.options"),K=new g("angularfire2.app.name");function ie(e,n,t){let r=typeof t=="string"&&t||"[DEFAULT]",o=typeof t=="object"&&t||{};o.name=o.name||r;let s=m.apps.filter(c=>c&&c.name===o.name)[0]||n.runOutsideAngular(()=>m.initializeApp(e,o));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let c=!!module.hot;ot("error",`${s.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new U(s)}var ot=(e,...n)=>{Q()&&typeof console<"u"&&console[e](...n)},it={provide:U,useFactory:ie,deps:[V,P,[new we,K]]},cn=(()=>{class e{static initializeApp(t,r){return{ngModule:e,providers:[{provide:V,useValue:t},{provide:K,useValue:r}]}}constructor(t){m.registerVersion("angularfire",B.full,"core"),m.registerVersion("angularfire",B.full,"app-compat"),m.registerVersion("angular",Ie.full,t.toString())}static \u0275fac=function(r){return new(r||e)(d($))};static \u0275mod=J({type:e});static \u0275inj=Y({providers:[it]})}return e})();function Me(e,n,t,r,o){let[,i,s]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===e)||[];if(i)return st(o,s)||(De("error",`${n} was already initialized on the ${t} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),De("warn",{is:o,was:s})),i;{let c=r();return globalThis.\u0275AngularfireInstanceCache.push([e,c,o]),c}}function st(e,n){try{return e.toString()===n.toString()}catch{return e===n}}var at=typeof module<"u"&&!!module.hot,De=(e,...n)=>{Q()&&typeof console<"u"&&console[e](...n)};globalThis.\u0275AngularfireInstanceCache||=[];var Ne=class{constructor(n){return n}},Fe=class{constructor(){return L()}};var ut=new Map,lt={activated:!1,tokenObservers:[]},dt={initialized:!1,enabled:!1};function f(e){return ut.get(e)||Object.assign({},lt)}function He(){return dt}var pt="https://content-firebaseappcheck.googleapis.com/v1";var ft="exchangeDebugToken",xe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Rn=24*60*60*1e3;var ae=class{constructor(n,t,r,o,i){if(this.operation=n,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(n){return E(this,null,function*(){this.stop();try{this.pending=new ee,this.pending.promise.catch(t=>{}),yield ht(this.getNextRun(n)),this.pending.resolve(),yield this.pending.promise,this.pending=new ee,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(n){if(n)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function ht(e){return new Promise(n=>{setTimeout(n,e)})}var gt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},w=new Re("appCheck","AppCheck",gt);function Be(e){if(!f(e).activated)throw w.create("use-before-activation",{appName:e.name})}function ze(r,o){return E(this,arguments,function*({url:e,body:n},t){let i={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(i["X-Firebase-Client"]=p)}let c={method:"POST",body:JSON.stringify(n),headers:i},a;try{a=yield fetch(e,c)}catch(p){throw w.create("fetch-network-error",{originalErrorMessage:p?.message})}if(a.status!==200)throw w.create("fetch-status-error",{httpStatus:a.status});let l;try{l=yield a.json()}catch(p){throw w.create("fetch-parse-error",{originalErrorMessage:p?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw w.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let y=Number(h[1])*1e3,F=Date.now();return{token:l.token,expireTimeMillis:F+y,issuedAtTimeMillis:F}})}function Ue(e,n){let{projectId:t,appId:r,apiKey:o}=e.options;return{url:`${pt}/projects/${t}/apps/${r}:${ft}?key=${o}`,body:{debug_token:n}}}var mt="firebase-app-check-database",At=1,ce="firebase-app-check-store";var W=null;function kt(){return W||(W=new Promise((e,n)=>{try{let t=indexedDB.open(mt,At);t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{var o;n(w.create("storage-open",{originalErrorMessage:(o=r.target.error)===null||o===void 0?void 0:o.message}))},t.onupgradeneeded=r=>{let o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(ce,{keyPath:"compositeKey"})}}}catch(t){n(w.create("storage-open",{originalErrorMessage:t?.message}))}}),W)}function Et(e,n){return Tt(wt(e),n)}function Tt(e,n){return E(this,null,function*(){let r=(yield kt()).transaction(ce,"readwrite"),i=r.objectStore(ce).put({compositeKey:e,value:n});return new Promise((s,c)=>{i.onsuccess=a=>{s()},r.onerror=a=>{var l;c(w.create("storage-set",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})})}function wt(e){return`${e.options.appId}-${e.name}`}var ue=new Pe("@firebase/app-check");function se(e,n){return ye()?Et(e,n).catch(t=>{ue.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ve(){return He().enabled}function Ke(){return E(this,null,function*(){let e=He();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var vt={error:"UNKNOWN_ERROR"};function It(e){return _e.encodeString(JSON.stringify(e),!1)}function le(e,n=!1){return E(this,null,function*(){let t=e.app;Be(t);let r=f(t),o=r.token,i;if(o&&!N(o)&&(r.token=void 0,o=void 0),!o){let a=yield r.cachedTokenPromise;a&&(N(a)?o=a:yield se(t,void 0))}if(!n&&o&&N(o))return{token:o.token};let s=!1;if(Ve()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ze(Ue(t,yield Ke()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let a=yield r.exchangeTokenPromise;return yield se(t,a),r.token=a,{token:a.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),o=yield f(t).exchangeTokenPromise}catch(a){a.code==="appCheck/throttled"?ue.warn(a.message):ue.error(a),i=a}let c;return o?i?N(o)?c={token:o.token,internalError:i}:c=$e(i):(c={token:o.token},r.token=o,yield se(t,o)):c=$e(i),s&&Rt(t,c),c})}function bt(e){return E(this,null,function*(){let n=e.app;Be(n);let{provider:t}=f(n);if(Ve()){let r=yield Ke(),{token:o}=yield ze(Ue(n,r),e.heartbeatServiceProvider);return{token:o}}else{let{token:r}=yield t.getToken();return{token:r}}})}function _t(e,n,t,r){let{app:o}=e,i=f(o),s={next:t,error:r,type:n};if(i.tokenObservers=[...i.tokenObservers,s],i.token&&N(i.token)){let c=i.token;Promise.resolve().then(()=>{t({token:c.token}),je(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>je(e))}function We(e,n){let t=f(e),r=t.tokenObservers.filter(o=>o.next!==n);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function je(e){let{app:n}=e,t=f(n),r=t.tokenRefresher;r||(r=yt(e),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yt(e){let{app:n}=e;return new ae(()=>E(this,null,function*(){let t=f(n),r;if(t.token?r=yield le(e,!0):r=yield le(e),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=f(n);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,o=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,o),Math.max(0,r-Date.now())}else return 0},xe.RETRIAL_MIN_WAIT,xe.RETRIAL_MAX_WAIT)}function Rt(e,n){let t=f(e).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&n.error!=null?r.error(n.error):r.next(n)}catch{}}function N(e){return e.expireTimeMillis-Date.now()>0}function $e(e){return{token:It(vt),error:e}}var de=class{constructor(n,t){this.app=n,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:n}=f(this.app);for(let t of n)We(this.app,t.next);return Promise.resolve()}};function Pt(e,n){return new de(e,n)}function St(e){return{getToken:n=>le(e,n),getLimitedUseToken:()=>bt(e),addTokenListener:n=>_t(e,"INTERNAL",n),removeTokenListener:n=>We(e.app,n)}}var Ct="@firebase/app-check",Dt="0.8.3";var Ot="app-check",Le="app-check-internal";function Mt(){ne(new te(Ot,e=>{let n=e.getProvider("app").getImmediate(),t=e.getProvider("heartbeat");return Pt(n,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,t)=>{e.getProvider(Le).initialize()})),ne(new te(Le,e=>{let n=e.getProvider("app-check").getImmediate();return St(n)},"PUBLIC").setInstantiationMode("EXPLICIT")),S(Ct,Dt)}Mt();var Nt=["localhost","0.0.0.0","127.0.0.1"],Ln=typeof window<"u"&&Nt.includes(window.location.hostname);var xt=new g("angularfire2.auth.use-emulator"),jt=new g("angularfire2.auth.settings"),$t=new g("angularfire2.auth.tenant-id"),Lt=new g("angularfire2.auth.langugage-code"),Ht=new g("angularfire2.auth.use-device-language"),Bt=new g("angularfire.auth.persistence"),zt=(e,n,t,r,o,i,s,c)=>Me(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let a=n.runOutsideAngular(()=>e.auth());if(t&&a.useEmulator(...t),r&&(a.tenantId=r),a.languageCode=o,i&&a.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))a.settings[l]=h;return c&&a.setPersistence(c),a},[t,r,o,i,s,c]),tr=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(t,r,o,i,s,c,a,l,h,y,F,p){let pe=new he,D=O(void 0).pipe(T(s.outsideAngular),b(()=>i.runOutsideAngular(()=>import("./chunk-DILSSENY.js"))),x(()=>ie(t,i,r)),x(k=>zt(k,i,c,l,h,y,a,F)),Z({bufferSize:1,refCount:!1}));if(be(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=O(null);else{D.pipe(Ee()).subscribe();let k=D.pipe(b(u=>u.getRedirectResult().then(A=>A,()=>null)),oe,Z({bufferSize:1,refCount:!1})),fe=D.pipe(b(u=>new R(A=>({unsubscribe:i.runOutsideAngular(()=>u.onAuthStateChanged(v=>A.next(v),v=>A.error(v),()=>A.complete()))})))),q=D.pipe(b(u=>new R(A=>({unsubscribe:i.runOutsideAngular(()=>u.onIdTokenChanged(v=>A.next(v),v=>A.error(v),()=>A.complete()))}))));this.authState=k.pipe(X(fe),I(s.outsideAngular),T(s.insideAngular)),this.user=k.pipe(X(q),I(s.outsideAngular),T(s.insideAngular)),this.idToken=this.user.pipe(b(u=>u?G(u.getIdToken()):O(null))),this.idTokenResult=this.user.pipe(b(u=>u?G(u.getIdTokenResult()):O(null))),this.credential=Ae(k,pe,this.authState.pipe(ke(u=>!u))).pipe(x(u=>u?.user?u:null),I(s.outsideAngular),T(s.insideAngular))}return Oe(this,D,i,{spy:{apply:(k,fe,q)=>{(k.startsWith("signIn")||k.startsWith("createUser"))&&q.then(u=>pe.next(u))}}})}static \u0275fac=function(r){return new(r||e)(d(V),d(K,8),d($),d(P),d(Ce),d(xt,8),d(jt,8),d($t,8),d(Lt,8),d(Ht,8),d(Bt,8),d(M,8))};static \u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();export{B as a,Yt as b,Ze as c,M as d,Ce as e,oe as f,Jt as g,Ne as h,Fe as i,V as j,K as k,ie as l,cn as m,Me as n,xt as o,jt as p,$t as q,Lt as r,Ht as s,Bt as t,zt as u,tr as v};
