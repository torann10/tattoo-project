import{a as m}from"./chunk-XV4P3U67.js";import{v as u}from"./chunk-LWAGGOL6.js";import{T as c,_ as p,da as n,r as o}from"./chunk-5G5AIX3G.js";import{a as h,b as d}from"./chunk-CQCHLVVT.js";var I=(()=>{let i=class i{constructor(t,e){this.afs=t,this.auth=e,this.availableTimes=[10,11,12,13,14,15,16],this.collectionName="Reservations"}create(t){return this.auth.user.pipe(o(e=>e?.uid)).pipe(c(e=>{let r=this.afs.createId();return this.afs.collection(this.collectionName).doc(r).set(d(h({},t),{userId:e,id:r}))}))}getAvailableTimesForDate(t){var e=new Date(t);return e.setDate(e.getDate()+1),this.afs.collection(this.collectionName,r=>r.where("recordedAt",">=",t).where("recordedAt","<",e)).get().pipe(o(r=>{let a=[...this.availableTimes];return r.forEach(f=>{let A=f.get("recordedAt").toDate().getHours(),l=a.indexOf(A);l!==-1&&a.splice(l,1)}),a}))}listForUser(){return this.auth.user.pipe(o(t=>t?.uid)).pipe(c(t=>this.afs.collection(this.collectionName,e=>e.orderBy("recordedAt","desc").where("userId","==",t)).get())).pipe(o(t=>t.docs.map(e=>e.data())))}};i.\u0275fac=function(e){return new(e||i)(n(m),n(u))},i.\u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"});let s=i;return s})();export{I as a};
